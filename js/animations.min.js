const AnimationController={init(){this.setupParallaxEffect(),this.setupPixelateEffect(),this.setupGlitchEffect(),this.setupTypingEffect(),this.setupRainEffect()},setupParallaxEffect(){if(window.innerWidth<=768)return;const t=document.querySelectorAll(".parallax");window.addEventListener("mousemove",e=>{const n=e.clientX/window.innerWidth,r=e.clientY/window.innerHeight;t.forEach(t=>{const e=t.getAttribute("data-speed")||5,o=(.5-n)*e,a=(.5-r)*e;t.style.transform=`translate(${o}px, ${a}px)`})})},setupPixelateEffect(){document.querySelectorAll(".pixel-effect").forEach(t=>{const e=Math.floor(3*Math.random())+1;t.style.filter=`blur(${e}px)`;const n=2*Math.random();t.style.animationDelay=`${n}s`})},setupGlitchEffect(){document.querySelectorAll(".glitch-effect").forEach(t=>{const e=t.textContent;setInterval(()=>{window.matchMedia("(prefers-reduced-motion: reduce)").matches||this.applyGlitchEffect(t,e)},5e3*Math.random()+3e3)})},applyGlitchEffect(t,e){const n='!@#$%^&*()_+{}:"<>?|~`1234567890';let r=0;const o=setInterval(()=>{let a="";for(let t=0;t<e.length;t++)if(Math.random()<.2){a+=n.charAt(Math.floor(32*Math.random()))}else a+=e[t];t.textContent=a,r++,r>=3&&(clearInterval(o),t.textContent=e)},100)},setupTypingEffect(){document.querySelectorAll("[data-typing]").forEach(t=>{const e=t.textContent;t.textContent="",t.setAttribute("data-original-text",e);const n=document.createElement("span");n.className="typing-cursor",n.textContent="|",t.appendChild(n);const r=new IntersectionObserver(n=>{n.forEach(n=>{n.isIntersecting&&(this.typeText(t,e,0),r.unobserve(t))})});r.observe(t)})},typeText(t,e,n){if(n<e.length){t.textContent=e.substring(0,n+1);const r=document.createElement("span");r.className="typing-cursor",r.textContent="|",t.appendChild(r);const o=Math.floor(50*Math.random())+30;setTimeout(()=>{this.typeText(t,e,n+1)},o)}else{const e=t.querySelector(".typing-cursor");e&&e.classList.add("blink")}},setupRainEffect(){document.querySelectorAll(".rain-effect").forEach(t=>{if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return;for(let e=0;e<50;e++){const e=document.createElement("div");e.className="rain-particle",e.style.left=100*Math.random()+"%",e.style.animationDuration=3*Math.random()+2+"s",e.style.animationDelay=5*Math.random()+"s",e.style.width=3*Math.random()+1+"px",e.style.height=10*Math.random()+5+"px",t.appendChild(e)}})}},EffectsController={init(){this.setupSkillBarAnimation(),this.setupProjectCardEffects(),this.setupAchievementEffects(),this.setupLoadingBarAnimation()},setupSkillBarAnimation(){const t=document.querySelectorAll(".skill-progress"),e=new IntersectionObserver(t=>{t.forEach(t=>{if(t.isIntersecting){const n=t.target.style.width;t.target.style.width="0",setTimeout(()=>{t.target.style.width=n},100),e.unobserve(t.target)}})});t.forEach(t=>{e.observe(t)})},setupProjectCardEffects(){document.querySelectorAll(".project-card").forEach(t=>{window.innerWidth>768&&(t.addEventListener("mousemove",e=>{const n=t.getBoundingClientRect(),r=n.left+n.width/2,o=n.top+n.height/2,a=e.clientX-r,s=(e.clientY-o)/(n.height/2)*5,i=-a/(n.width/2)*5;t.style.transform=`perspective(1000px) rotateX(${s}deg) rotateY(${i}deg) translateY(-10px)`}),t.addEventListener("mouseleave",()=>{t.style.transform="translateY(-10px)",setTimeout(()=>{t.style.transform=""},300)}))})},setupAchievementEffects(){document.querySelectorAll(".achievement-icon").forEach(t=>{t.addEventListener("click",()=>{t.classList.add("shine-effect"),window.GameUI&&window.GameUI.playSound&&window.GameUI.playSound("click-sound"),setTimeout(()=>{t.classList.remove("shine-effect")},800)})})},setupLoadingBarAnimation(){const t=document.querySelector(".loading-progress");if(!t)return;let e=0;const n=setInterval(()=>{e+=10*Math.random(),e>=100&&(e=100,clearInterval(n)),t.style.width=`${e}%`},200)}};document.addEventListener("DOMContentLoaded",()=>{AnimationController.init(),EffectsController.init();const t=document.documentElement,e=t=>{t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,e,n,r)=>e+e+n+n+r+r);const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?`${parseInt(e[1],16)}, ${parseInt(e[2],16)}, ${parseInt(e[3],16)}`:null},n=getComputedStyle(document.body),r=n.getPropertyValue("--primary-color").trim(),o=n.getPropertyValue("--secondary-color").trim(),a=n.getPropertyValue("--accent-color").trim(),s=n.getPropertyValue("--card-background").trim();r.startsWith("#")&&t.style.setProperty("--primary-color-rgb",e(r)),o.startsWith("#")&&t.style.setProperty("--secondary-color-rgb",e(o)),a.startsWith("#")&&t.style.setProperty("--accent-color-rgb",e(a)),s.startsWith("#")&&t.style.setProperty("--card-background-rgb",e(s))}),document.addEventListener("click",t=>{if(t.target.classList.contains("game-button")||t.target.classList.contains("menu-button")||t.target.classList.contains("back-button")){const e=t.target,n=document.createElement("span");n.className="ripple";const r=e.getBoundingClientRect(),o=Math.max(r.width,r.height);n.style.width=n.style.height=`${o}px`,n.style.left=t.clientX-r.left-o/2+"px",n.style.top=t.clientY-r.top-o/2+"px",e.appendChild(n),setTimeout(()=>{n.remove()},600)}});